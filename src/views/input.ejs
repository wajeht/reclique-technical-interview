<!-- -------------------- css -------------------- -->
<style>
	.answer {
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
	}

	.answer-type {
		margin: 20px 0;
	}

	.answer-table {
		display: none;
		background-color: #f4f4f4;
		border-radius: 2px;
		padding: 15px;
	}

	.answer-table td {
		padding: 0 5px;
	}

	.answer-table input[type='text'],
	.answer-table input[type='date'] {
		width: 100%;
	}

	.answer-button {
		margin-top: 20px;
		cursor: pointer;
		padding: 5px 15px;
	}
</style>

<!-- -------------------- html -------------------- -->
<div class="answer">
	<!-- answer type -->
	<div id="type" class="answer-type">
		<label for="type">Answer type: </label>
		<select name="type">
			<option value=""></option>
			<option value="cash">cash</option>
			<option value="accrual">accrual</option>
		</select>
	</div>

	<!-- cash -->
	<table id="cash" class="answer-table">
		<!-- entry heading  -->
		<tr>
			<th>when</th>
			<th>entries type</th>
			<th>due</th>
			<th>due amount</th>
		</tr>

		<!-- cash -->
		<form action="/?question=<%= page %>&type=cash" method="post">
			<% for (const [index, entry] of cash.entries()) { %>

			<!-- entry input -->
			<tr>
				<!-- when -->
				<td><input type="text" name="when<%= index %>" placeholder="mm/dd" required /></td>

				<!-- entries -->
				<td>
					<select name="entriesType<%= index %>" required>
						<option value=""></option>
						<option value="revenue">Revenue</option>
						<option value="deferred">Deferred</option>
						<option value="cash">Cash</option>
						<option value="receivable">Receivable</option>
						<option value="contra">Contra</option>
						<option value="system-credit">System Credit (Liability)</option>
					</select>
				</td>

				<!-- due -->
				<td style="display: flex; gap: 7px">
					<div
						style="
							display: flex;
							justify-content: center;
							align-items: center;
							gap: 3px;
						"
					>
						<label for="dr">dr</label>
						<input type="radio" id="dr" name="due<%= index %>" value="dr" required />
					</div>
					<div
						style="
							display: flex;
							justify-content: center;
							align-items: center;
							gap: 3px;
						"
					>
						<label for="cr">cr</label>
						<input type="radio" id="css" name="due<%= index %>" value="cr" required />
					</div>
				</td>

				<!-- amount -->
				<td>
					<input type="text" name="dueAmount<%= index %>" required />
				</td>
			</tr>

			<% } %>

			<!-- button row -->
			<tr>
				<td>
					<button class="answer-button" type="submit">Submit</button>
				</td>
			</tr>
		</form>
	</table>

	<!-- accrual -->
	<table id="accrual" class="answer-table">
		<!-- entry heading  -->
		<tr>
			<th>when</th>
			<th>entries type</th>
			<th>due</th>
			<th>due amount</th>
		</tr>

		<!-- cash -->
		<form action="/?question=<%= page %>&type=accrual" method="post">
			<% for (const [index, entry] of accrual.entries()) { %>
			<tr>
				<td><%= index %></td>
			</tr>

			<!-- entry input -->
			<tr>
				<!-- when -->
				<td><input type="text" name="when" placeholder="mm/dd" required /></td>

				<!-- entries -->
				<td>
					<select name="entriesType" required>
						<option value=""></option>
						<option value="revenue">Revenue</option>
						<option value="deferred">Deferred</option>
						<option value="cash">Cash</option>
						<option value="receivable">Receivable</option>
						<option value="contra">Contra</option>
						<option value="system-credit">System Credit (Liability)</option>
					</select>
				</td>

				<!-- due -->
				<td style="display: flex; gap: 7px">
					<div
						style="
							display: flex;
							justify-content: center;
							align-items: center;
							gap: 3px;
						"
					>
						<label for="dr">dr</label>
						<input type="radio" id="dr" name="due" value="dr" required />
					</div>
					<div
						style="
							display: flex;
							justify-content: center;
							align-items: center;
							gap: 3px;
						"
					>
						<label for="cr">cr</label>
						<input type="radio" id="css" name="due" value="cr" required />
					</div>
				</td>

				<!-- amount -->
				<td>
					<input type="text" name="dueAmount" required />
				</td>
			</tr>

			<% } %>

			<!-- button row -->
			<tr>
				<td>
					<button class="answer-button" type="submit">Submit</button>
				</td>
			</tr>
		</form>
	</table>
</div>

<!-- -------------------- script -------------------- -->
<script>
	document.getElementById('type').addEventListener('change', (evt) => {
		document.querySelectorAll('table').forEach((table) => {
			table.style.display = 'none';
		});
		document.getElementById(evt.target.value).style.display = 'block';
	});
</script>
